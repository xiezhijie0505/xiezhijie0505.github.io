
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>èŒè‡å¤§ç‹çš„è€ƒç ”è‡ªå¾‹å°åŠ©æ‰‹ğŸ„</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script>
        // é…ç½®Tailwindè‡ªå®šä¹‰ä¸»é¢˜
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        mushroom: {
                            pink: '#FF7E95',
                            yellow: '#FFE066',
                            green: '#8CD979',
                            brown: '#A67C52',
                            light: '#F5F3E7'
                        },
                    },
                    fontFamily: {
                        cute: ['"Comic Sans MS"', '"Bubblegum Sans"', 'cursive'],
                    },
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .text-shadow {
                text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
            }
            .animate-bounce-slow {
                animation: bounce 2s infinite;
            }
            .card-hover {
                transition: all 0.3s ease;
            }
            .card-hover:hover {
                transform: translateY(-5px);
                box-shadow: 0 10px 25px -5px rgba(0,0,0,0.1);
            }
        }
    </style>
</head>
<body class="bg-mushroom-light min-h-screen font-cute text-gray-800">
    <!-- é¡¶éƒ¨æ ‡é¢˜ -->
    <header class="py-6 px-4 bg-gradient-to-r from-mushroom-pink to-mushroom-yellow text-white shadow-md">
        <div class="container mx-auto flex flex-col items-center">
            <h1 class="text-[clamp(1.8rem,4vw,2.8rem)] font-bold text-shadow flex items-center">
                <i class="fa fa-pagelines mr-3 animate-bounce-slow"></i>
                èŒè‡å¤§ç‹çš„è€ƒç ”è‡ªå¾‹å°åŠ©æ‰‹
                <i class="fa fa-pagelines ml-3 animate-bounce-slow"></i>
            </h1>
            <p class="mt-2 text-[clamp(1rem,2vw,1.2rem)] opacity-90">æ—©ç¡æ—©èµ· + å¥½å¥½åƒé¥­ + ç­”è¾©é¡ºåˆ© = ä¸Šå²¸æˆåŠŸï¼ğŸ„</p>
        </div>
    </header>

    <!-- ä¸»è¦å†…å®¹åŒº -->
    <main class="container mx-auto py-8 px-4 grid grid-cols-1 md:grid-cols-2 gap-6">
        <!-- 1. èµ·åºŠæ‰“å¡å¡ç‰‡ -->
        <section class="bg-white rounded-2xl shadow-lg p-6 card-hover">
            <div class="flex items-center mb-4">
                <div class="w-12 h-12 rounded-full bg-mushroom-yellow flex items-center justify-center text-white mr-4">
                    <i class="fa fa-sun-o text-2xl"></i>
                </div>
                <h2 class="text-2xl font-bold text-mushroom-brown">æ—©èµ·æ‰“å¡ ğŸŒ</h2>
            </div>
            <div class="text-center py-4">
                <p id="wakeUpTime" class="text-xl mb-4">å½“å‰æ—¶é—´ï¼š<span class="font-bold"></span></p>
                <button id="wakeUpCheckIn" class="bg-mushroom-yellow hover:bg-mushroom-yellow/90 text-white font-bold py-3 px-8 rounded-full shadow-md transition-colors">
                    æˆ‘å·²æ—©èµ·æ‰“å¡ï¼
                </button>
                <div id="wakeUpSuccess" class="mt-4 hidden">
                    <p class="text-mushroom-green text-xl font-bold flex items-center justify-center">
                        <i class="fa fa-check-circle mr-2"></i> å¤ªæ£’å•¦ï¼èŒè‡å¤§ç‹ä»Šå¤©ä¹Ÿæ˜¯å…ƒæ°”æ»¡æ»¡çš„ä¸€å¤©ï½
                    </p>
                    <img src="https://picsum.photos/id/237/200/100" alt="å¯çˆ±èŒè‡" class="rounded-lg mt-2 mx-auto">
                </div>
            </div>
            <div class="mt-4 text-gray-600 text-sm">
                <p>âœ… è€ƒç ”äººå»ºè®®èµ·åºŠæ—¶é—´ï¼š6:30-7:00</p>
                <p>âœ… æ—©èµ·åå–ä¸€æ¯æ¸©æ°´ï¼Œå¼€å¯é«˜æ•ˆå­¦ä¹ ï¼</p>
            </div>
        </section>

        <!-- 2. æ—©ç¡æé†’å¡ç‰‡ -->
        <section class="bg-white rounded-2xl shadow-lg p-6 card-hover">
            <div class="flex items-center mb-4">
                <div class="w-12 h-12 rounded-full bg-mushroom-pink flex items-center justify-center text-white mr-4">
                    <i class="fa fa-moon-o text-2xl"></i>
                </div>
                <h2 class="text-2xl font-bold text-mushroom-brown">æ—©ç¡æé†’ ğŸŒ™</h2>
            </div>
            <div class="text-center py-4">
                <p class="text-xl mb-2">ç†æƒ³ç¡çœ æ—¶é—´ï¼š23:00å‰</p>
                <div id="sleepCountdown" class="text-2xl font-bold text-mushroom-pink my-4"></div>
                <button id="sleepReminder" class="bg-mushroom-pink hover:bg-mushroom-pink/90 text-white font-bold py-3 px-8 rounded-full shadow-md transition-colors">
                    è®¾ç½®ç¡å‰æé†’
                </button>
                <div id="sleepReminderSuccess" class="mt-4 hidden">
                    <p class="text-mushroom-green text-xl font-bold flex items-center justify-center">
                        <i class="fa fa-bell mr-2"></i> æé†’å·²è®¾ç½®ï¼åˆ°ç‚¹ä¼šé€šçŸ¥ä½ æ”¾ä¸‹æ‰‹æœºå“¦ï½
                    </p>
                </div>
            </div>
            <div class="mt-4 text-gray-600 text-sm">
                <p>âœ… ç¡å‰1å°æ—¶è¿œç¦»ç”µå­å±å¹•</p>
                <p>âœ… ä¿è¯7-8å°æ—¶ç¡çœ ï¼Œè®°å¿†åŠ›æ›´å¥½ï¼</p>
            </div>
        </section>

        <!-- 3. é¥®é£Ÿå»ºè®®å¡ç‰‡ -->
        <section class="bg-white rounded-2xl shadow-lg p-6 card-hover">
            <div class="flex items-center mb-4">
                <div class="w-12 h-12 rounded-full bg-mushroom-green flex items-center justify-center text-white mr-4">
                    <i class="fa fa-cutlery text-2xl"></i>
                </div>
                <h2 class="text-2xl font-bold text-mushroom-brown">å¥½å¥½åƒé¥­ ğŸ¥—</h2>
            </div>
            <div class="mb-4">
                <p class="text-lg mb-3">è€ƒç ”äººæ¯æ—¥é¥®é£Ÿæ­é…å»ºè®®ï¼š</p>
                <div class="grid grid-cols-3 gap-3 mb-4">
                    <div class="bg-mushroom-green/10 p-3 rounded-lg text-center">
                        <p class="font-bold text-mushroom-green">è›‹ç™½è´¨</p>
                        <p class="text-sm">é¸¡è›‹/ç‰›å¥¶/ç˜¦è‚‰</p>
                    </div>
                    <div class="bg-mushroom-yellow/10 p-3 rounded-lg text-center">
                        <p class="font-bold text-mushroom-yellow">ç¢³æ°´</p>
                        <p class="text-sm">æ‚ç²®/çº¢è–¯/ç‡•éº¦</p>
                    </div>
                    <div class="bg-mushroom-pink/10 p-3 rounded-lg text-center">
                        <p class="font-bold text-mushroom-pink">è”¬èœ</p>
                        <p class="text-sm">ç»¿å¶èœ/èŒè‡ç±»</p>
                    </div>
                </div>
                <button id="randomMeal" class="w-full bg-mushroom-green hover:bg-mushroom-green/90 text-white font-bold py-3 rounded-xl shadow-md transition-colors">
                    éšæœºç”Ÿæˆä»Šæ—¥é£Ÿè°±
                </button>
            </div>
            <div id="mealResult" class="mt-4 p-3 bg-gray-50 rounded-lg hidden">
                <p class="font-bold text-center mb-2">ä»Šæ—¥æ¨èé£Ÿè°±ï¼š</p>
                <p id="mealText" class="text-center"></p>
            </div>
        </section>

        <!-- 4. ç­”è¾©å‡†å¤‡å¡ç‰‡ -->
        <section class="bg-white rounded-2xl shadow-lg p-6 card-hover">
            <div class="flex items-center mb-4">
                <div class="w-12 h-12 rounded-full bg-mushroom-brown flex items-center justify-center text-white mr-4">
                    <i class="fa fa-graduation-cap text-2xl"></i>
                </div>
                <h2 class="text-2xl font-bold text-mushroom-brown">ç­”è¾©é¡ºåˆ© ğŸ“</h2>
            </div>
            <div class="text-center py-4">
                <div class="mb-4">
                    <label for="defenseDate" class="text-lg mr-2">ç­”è¾©æ—¥æœŸï¼š</label>
                    <input type="date" id="defenseDate" class="p-2 border border-gray-300 rounded-lg font-cute">
                </div>
                <div id="defenseCountdown" class="text-2xl font-bold text-mushroom-brown my-4">
                    è¯·é€‰æ‹©ç­”è¾©æ—¥æœŸ
                </div>
                <button id="cheerUp" class="bg-mushroom-brown hover:bg-mushroom-brown/90 text-white font-bold py-3 px-8 rounded-full shadow-md transition-colors">
                    æ¥ç‚¹æ‰“æ°”é¼“åŠ±ï¼
                </button>
                <div id="cheerText" class="mt-4 p-3 bg-mushroom-brown/10 rounded-lg hidden">
                    <p class="text-xl font-bold text-mushroom-brown"></p>
                </div>
            </div>
            <div class="mt-4 text-gray-600 text-sm">
                <p>âœ… æå‰3å¤©æ¨¡æ‹Ÿç­”è¾©ï¼Œç†Ÿæ‚‰æµç¨‹</p>
                <p>âœ… é‡ç‚¹å¤ä¹ è®ºæ–‡æ ¸å¿ƒè§‚ç‚¹å’Œåˆ›æ–°ç‚¹</p>
                <p>âœ… ä¿æŒè‡ªä¿¡ï¼ŒèŒè‡å¤§ç‹æœ€æ£’ï¼</p>
            </div>
        </section>
    </main>

    <!-- åº•éƒ¨ç»Ÿè®¡ -->
    <footer class="bg-mushroom-brown text-white py-6 px-4 mt-8">
        <div class="container mx-auto">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-center">
                <div>
                    <h3 class="text-xl font-bold mb-2">æ—©èµ·æ‰“å¡æ¬¡æ•°</h3>
                    <p id="wakeUpCount" class="text-3xl">0</p>
                </div>
                <div>
                    <h3 class="text-xl font-bold mb-2">æ—©ç¡æé†’æ¬¡æ•°</h3>
                    <p id="sleepCount" class="text-3xl">0</p>
                </div>
                <div>
                    <h3 class="text-xl font-bold mb-2">è·ç¦»ç­”è¾©</h3>
                    <p id="footerDefenseCountdown" class="text-3xl">-- å¤©</p>
                </div>
            </div>
            <div class="mt-6 text-center text-sm opacity-80">
                <p>ğŸ„ èŒè‡å¤§ç‹çš„è€ƒç ”è‡ªå¾‹å°åŠ©æ‰‹ | ç¥ä¸Šå²¸æˆåŠŸï¼Œç­”è¾©é¡ºåˆ©ï¼ğŸ„</p>
            </div>
        </div>
    </footer>

    <script>
        // åˆå§‹åŒ–æœ¬åœ°å­˜å‚¨
        if (!localStorage.getItem('wakeUpCount')) localStorage.setItem('wakeUpCount', 0);
        if (!localStorage.getItem('sleepCount')) localStorage.setItem('sleepCount', 0);
        if (!localStorage.getItem('defenseDate')) localStorage.setItem('defenseDate', '');

        // DOMå…ƒç´ 
        const wakeUpCheckIn = document.getElementById('wakeUpCheckIn');
        const wakeUpSuccess = document.getElementById('wakeUpSuccess');
        const wakeUpCountEl = document.getElementById('wakeUpCount');
        const sleepReminder = document.getElementById('sleepReminder');
        const sleepReminderSuccess = document.getElementById('sleepReminderSuccess');
        const sleepCountEl = document.getElementById('sleepCount');
        const randomMeal = document.getElementById('randomMeal');
        const mealResult = document.getElementById('mealResult');
        const mealText = document.getElementById('mealText');
        const defenseDate = document.getElementById('defenseDate');
        const defenseCountdown = document.getElementById('defenseCountdown');
        const footerDefenseCountdown = document.getElementById('footerDefenseCountdown');
        const cheerUp = document.getElementById('cheerUp');
        const cheerText = document.getElementById('cheerText');
        const wakeUpTimeEl = document.getElementById('wakeUpTime').querySelector('span');
        const sleepCountdownEl = document.getElementById('sleepCountdown');

        // æ›´æ–°å½“å‰æ—¶é—´
        function updateCurrentTime() {
            const now = new Date();
            const timeStr = now.toLocaleTimeString('zh-CN', { hour: '2-digit', minute: '2-digit', second: '2-digit' });
            wakeUpTimeEl.textContent = timeStr;

            // è®¡ç®—è·ç¦»23ç‚¹çš„æ—¶é—´ï¼ˆæ—©ç¡æé†’å€’è®¡æ—¶ï¼‰
            const sleepTime = new Date(now);
            sleepTime.setHours(23, 0, 0, 0);
            const diff = sleepTime - now;
            if (diff > 0) {
                const hours = Math.floor(diff / 3600000);
                const minutes = Math.floor((diff % 3600000) / 60000);
                sleepCountdownEl.textContent = `è·ç¦»23ç‚¹è¿˜æœ‰ï¼š${hours}å°æ—¶${minutes}åˆ†é’Ÿ`;
            } else {
                sleepCountdownEl.textContent = `ä»Šå¤©ä¹Ÿè¦æ—©ç‚¹ä¼‘æ¯å‘€ï½`;
            }
        }

        // æ—©èµ·æ‰“å¡
        wakeUpCheckIn.addEventListener('click', () => {
            let count = parseInt(localStorage.getItem('wakeUpCount')) + 1;
            localStorage.setItem('wakeUpCount', count);
            wakeUpCountEl.textContent = count;
            wakeUpSuccess.classList.remove('hidden');
            
            // 3ç§’åéšè—æˆåŠŸæç¤º
            setTimeout(() => {
                wakeUpSuccess.classList.add('hidden');
            }, 3000);
        });

        // æ—©ç¡æé†’è®¾ç½®
        sleepReminder.addEventListener('click', () => {
            let count = parseInt(localStorage.getItem('sleepCount')) + 1;
            localStorage.setItem('sleepCount', count);
            sleepCountEl.textContent = count;
            sleepReminderSuccess.classList.remove('hidden');
            
            // æ¨¡æ‹Ÿè®¾ç½®æé†’ï¼ˆå®é™…é¡¹ç›®å¯å¯¹æ¥Notification APIï¼‰
            setTimeout(() => {
                sleepReminderSuccess.classList.add('hidden');
                if (Notification.permission === 'granted') {
                    new Notification('æ—©ç¡æé†’', { body: 'èŒè‡å¤§ç‹ï¼Œè¯¥æ”¾ä¸‹æ‰‹æœºå‡†å¤‡ç¡è§‰å•¦ï½' });
                } else if (Notification.permission !== 'denied') {
                    Notification.requestPermission().then(perm => {
                        if (perm === 'granted') {
                            new Notification('æ—©ç¡æé†’', { body: 'èŒè‡å¤§ç‹ï¼Œè¯¥æ”¾ä¸‹æ‰‹æœºå‡†å¤‡ç¡è§‰å•¦ï½' });
                        }
                    });
                }
            }, 3000);
        });

        // éšæœºé£Ÿè°±ç”Ÿæˆ
        const mealOptions = [
            'æ—©é¤ï¼šæ°´ç…®è›‹+ç‰›å¥¶+å…¨éº¦é¢åŒ… | åˆé¤ï¼šæ‚ç²®é¥­+æ¸…ç‚’æ—¶è”¬+é¸¡èƒ¸è‚‰ | æ™šé¤ï¼šå°ç±³ç²¥+å‡‰æ‹Œé»„ç“œ+æ¸…è’¸é±¼',
            'æ—©é¤ï¼šç‡•éº¦ç²¥+åšæœ+é¦™è•‰ | åˆé¤ï¼šçº¢è–¯+è¥¿å…°èŠ±ç‚’è™¾ä»+è±†è…æ±¤ | æ™šé¤ï¼šè”¬èœé¢+é¸¡è›‹+é¦™è‡',
            'æ—©é¤ï¼šè±†æµ†+åŒ…å­+å‡‰æ‹Œæµ·å¸¦ä¸ | åˆé¤ï¼šç±³é¥­+ç•ªèŒ„ç‚’è›‹+æ¸…ç‚’æ²¹éº¦èœ | æ™šé¤ï¼šæ‚ç²®ç²¥+æ¸…è’¸æ’éª¨+å‡‰æ‹Œé»„ç“œ',
            'æ—©é¤ï¼šç‰›å¥¶+ä¸‰æ˜æ²»ï¼ˆç«è…¿+ç”Ÿèœï¼‰ | åˆé¤ï¼šèéº¦é¢+ç‰›è‚‰+é’èœ | æ™šé¤ï¼šå°ç±³ç²¥+ç‚’èŒè‡+ç™½ç…®è›‹'
        ];
        randomMeal.addEventListener('click', () => {
            const randomMeal = mealOptions[Math.floor(Math.random() * mealOptions.length)];
            mealText.textContent = randomMeal;
            mealResult.classList.remove('hidden');
        });

        // ç­”è¾©å€’è®¡æ—¶è®¡ç®—
        function calculateDefenseCountdown() {
            const selectedDate = localStorage.getItem('defenseDate');
            if (!selectedDate) return;
            
            const now = new Date();
            const defense = new Date(selectedDate);
            const diffTime = defense - now;
            
            if (diffTime < 0) {
                defenseCountdown.textContent = 'ç­”è¾©å·²ç»“æŸï¼ğŸ‰';
                footerDefenseCountdown.textContent = 'å·²ç»“æŸ';
            } else {
                const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                defenseCountdown.textContent = `è·ç¦»ç­”è¾©è¿˜æœ‰ï¼š${diffDays} å¤©`;
                footerDefenseCountdown.textContent = `${diffDays} å¤©`;
            }
        }

        // ç­”è¾©æ—¥æœŸé€‰æ‹©
        defenseDate.addEventListener('change', () => {
            localStorage.setItem('defenseDate', defenseDate.value);
            calculateDefenseCountdown();
        });

        // æ‰“æ°”é¼“åŠ±æ–‡æœ¬
        const cheerTexts = [
            'èŒè‡å¤§ç‹çš„è®ºæ–‡è¶…æ£’çš„ï¼ç­”è¾©ä¸€å®šé¡ºé¡ºåˆ©åˆ©ï½',
            'è‡ªä¿¡å°±æ˜¯æœ€å¥½çš„æ­¦å™¨ï¼Œä½ å·²ç»å‡†å¤‡å¾—å¾ˆå……åˆ†å•¦ï¼',
            'è€å¸ˆéƒ½ä¼šå–œæ¬¢ä½ çš„ç ”ç©¶ï¼Œå¤§èƒ†è¡¨è¾¾å°±å¥½ï¼',
            'è€ƒç ”éƒ½ç†¬è¿‡æ¥äº†ï¼Œç­”è¾©å¯¹ä½ æ¥è¯´å°èœä¸€ç¢Ÿï½',
            'åŠ æ²¹ï¼ç­”è¾©ç»“æŸå°±æ˜¯èƒœåˆ©çš„æ›™å…‰ï¼',
            'èŒè‡å¤§ç‹æœ€æ£’ï¼ä¸Šå²¸+ç­”è¾©åŒä¸°æ”¶ï¼'
        ];
        cheerUp.addEventListener('click', () => {
            const randomCheer = cheerTexts[Math.floor(Math.random() * cheerTexts.length)];
            cheerText.querySelector('p').textContent = randomCheer;
            cheerText.classList.remove('hidden');
            
            // 5ç§’åéšè—
            setTimeout(() => {
                cheerText.classList.add('hidden');
            }, 5000);
        });

        // åˆå§‹åŒ–é¡µé¢
        function initPage() {
            // æ›´æ–°ç»Ÿè®¡æ•°æ®
            wakeUpCountEl.textContent = localStorage.getItem('wakeUpCount');
            sleepCountEl.textContent = localStorage.getItem('sleepCount');
            
            // è®¾ç½®å·²é€‰çš„ç­”è¾©æ—¥æœŸ
            const savedDefenseDate = localStorage.getItem('defenseDate');
            if (savedDefenseDate) {
                defenseDate.value = savedDefenseDate;
            }
            
            // è®¡ç®—ç­”è¾©å€’è®¡æ—¶
            calculateDefenseCountdown();
            
            // æ›´æ–°å½“å‰æ—¶é—´ï¼ˆæ¯ç§’æ›´æ–°ä¸€æ¬¡ï¼‰
            updateCurrentTime();
            setInterval(updateCurrentTime, 1000);
            
            // è¯·æ±‚é€šçŸ¥æƒé™
            if (Notification.permission !== 'granted' && Notification.permission !== 'denied') {
                Notification.requestPermission();
            }
        }

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        window.addEventListener('load', initPage);
    </script>
</body>
</html>
